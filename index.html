<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>اتجاه القبلة</title>
  <style>
    body { font-family: Arial; text-align: center; margin-top: 50px; }
    #compass { width: 200px; transition: transform 0.2s linear; }
    button { padding: 10px 20px; margin-top: 15px; }
  </style>
</head>
<body>
  <h2>اتجاه القبلة</h2>
   <div id="compass-container">
    <img id="compass-bg" src="Compass.png" alt="Compass">
    <img id="compass-needle" src="Needle.png" alt="Needle">
  </div>
  <p id="angle">انتظر...</p>
  <button id="enable">اضغط لتفعيل البوصلة</button>

  <script>
    const compass = document.getElementById("compass");
    const angleText = document.getElementById("angle");
    const enableButton = document.getElementById("enable");

    function startCompass() {
      if (typeof DeviceOrientationEvent.requestPermission === 'function') {
        DeviceOrientationEvent.requestPermission()
        .then(permissionState => {
          if (permissionState === 'granted') {
            window.addEventListener("deviceorientation", handleOrientation);
          }
        })
        .catch(console.error);
      } else {
        window.addEventListener("deviceorientation", handleOrientation);
      }
    }

    function handleOrientation(event) {
      let heading = event.webkitCompassHeading || 360 - event.alpha;
      compass.style.transform = `rotate(${heading}deg)`;
      angleText.textContent = "زاوية الاتجاه: " + Math.round(heading) + "°";
    }

    enableButton.onclick = function() {
      startCompass();
    };
  </script>
</body>
</html>
